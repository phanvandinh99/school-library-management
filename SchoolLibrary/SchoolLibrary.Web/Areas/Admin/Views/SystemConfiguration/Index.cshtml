@model SchoolLibrary.Web.Models.ViewModels.SystemSettingsViewModel
@{
    ViewData["Title"] = "C·∫•u h√¨nh H·ªá th·ªëng";
}

<div class="content-box">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0">‚öôÔ∏è C·∫•u h√¨nh H·ªá th·ªëng</h2>
        <a asp-action="ResetDefaults" class="btn btn-warning" onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën reset v·ªÅ c·∫•u h√¨nh m·∫∑c ƒë·ªãnh?');">
            üîÑ Reset v·ªÅ M·∫∑c ƒë·ªãnh
        </a>
    </div>

    <div class="alert alert-info">
        <strong>üí° L∆∞u √Ω:</strong> C√°c thay ƒë·ªïi s·∫Ω ·∫£nh h∆∞·ªüng ƒë·∫øn to√†n b·ªô h·ªá th·ªëng. Vui l√≤ng ki·ªÉm tra k·ªπ tr∆∞·ªõc khi l∆∞u.
    </div>

    <form asp-action="UpdateSettings" method="post" class="mt-4">
        <div asp-validation-summary="ModelOnly" class="text-danger"></div>

        <div class="row">
            @for (int i = 0; i < Model.Settings.Count; i++)
            {
                var setting = Model.Settings[i];
                <div class="col-md-6 mb-3">
                    <div class="card h-100">
                        <div class="card-header">
                            <strong>@setting.SettingKey</strong>
                            @if (!string.IsNullOrEmpty(setting.SettingType))
                            {
                                <span class="badge bg-secondary float-end">@setting.SettingType</span>
                            }
                        </div>
                        <div class="card-body">
                            <input type="hidden" asp-for="Settings[i].SettingID" />
                            <input type="hidden" asp-for="Settings[i].SettingKey" />
                            <input type="hidden" asp-for="Settings[i].SettingType" />
                            
                            <label class="form-label">@setting.Description</label>
                            
                            @if (setting.SettingType == "Integer" || setting.SettingType == "Decimal")
                            {
                                <input asp-for="Settings[i].SettingValue" class="form-control" type="number" />
                            }
                            else if (setting.SettingType == "Boolean")
                            {
                                <select asp-for="Settings[i].SettingValue" class="form-select">
                                    <option value="true">C√≥</option>
                                    <option value="false">Kh√¥ng</option>
                                </select>
                            }
                            else
                            {
                                <input asp-for="Settings[i].SettingValue" class="form-control" type="text" />
                            }
                            
                            <input type="hidden" asp-for="Settings[i].Description" />
                        </div>
                    </div>
                </div>
            }
        </div>

        <div class="mt-4">
            <button type="submit" class="btn btn-primary btn-lg">
                üíæ L∆∞u C·∫•u h√¨nh
            </button>
            <a asp-area="Admin" asp-controller="Admin" asp-action="Dashboard" class="btn btn-secondary btn-lg">
                ‚Ü©Ô∏è Quay l·∫°i
            </a>
        </div>
    </form>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}


