@model List<Reservation>
@{
    ViewData["Title"] = "ƒê·∫∑t tr∆∞·ªõc S√°ch";
}

<div class="content-box">
    <h2>üìã ƒê·∫∑t tr∆∞·ªõc S√°ch</h2>
    
    <div class="table-responsive">
        <table class="table">
            <thead>
                <tr>
                    <th>T√™n s√°ch</th>
                    <th>Th·ªÉ lo·∫°i</th>
                    <th>Ng√†y ƒë·∫∑t</th>
                    <th>H·∫øt h·∫°n</th>
                    <th>Tr·∫°ng th√°i</th>
                    <th>Thao t√°c</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var reservation in Model)
                {
                    <tr>
                        <td>@reservation.Book?.Title</td>
                        <td>@(reservation.Book?.Category?.CategoryName ?? "N/A")</td>
                        <td>@reservation.ReservationDate.ToString("dd/MM/yyyy")</td>
                        <td>@(reservation.ExpiryDate?.ToString("dd/MM/yyyy") ?? "N/A")</td>
                        <td>
                            @switch (reservation.Status)
                            {
                                case "Pending":
                                    <span class="badge bg-warning">ƒêang ch·ªù</span>
                                    break;
                                case "Available":
                                    <span class="badge bg-success">C√≥ s·∫µn</span>
                                    break;
                                case "Expired":
                                    <span class="badge bg-danger">H·∫øt h·∫°n</span>
                                    break;
                                case "Cancelled":
                                    <span class="badge bg-secondary">ƒê√£ h·ªßy</span>
                                    break;
                                default:
                                    <span class="badge bg-secondary">@reservation.Status</span>
                                    break;
                            }
                        </td>
                        <td>
                            @if (reservation.Status == "Pending")
                            {
                                <form method="post" asp-action="Cancel" style="display: inline;">
                                    @Html.AntiForgeryToken()
                                    <input type="hidden" name="id" value="@reservation.ReservationID" />
                                    <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën h·ªßy ƒë·∫∑t tr∆∞·ªõc n√†y?');">H·ªßy</button>
                                </form>
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    @if (Model.Count == 0)
    {
        <div class="alert alert-info">
            <strong>B·∫°n ch∆∞a ƒë·∫∑t tr∆∞·ªõc s√°ch n√†o!</strong> 
            <a href="@Url.Action("Index", "Book")" class="alert-link">T√¨m s√°ch ƒë·ªÉ ƒë·∫∑t tr∆∞·ªõc</a>
        </div>
    }
</div>

