@model List<BorrowRecord>
@{
    ViewData["Title"] = "L·ªãch s·ª≠ M∆∞·ª£n";
}

<div class="content-box">
    <h2>üìñ L·ªãch s·ª≠ M∆∞·ª£n S√°ch</h2>
    
    <div class="table-responsive">
        <table class="table">
            <thead>
                <tr>
                    <th>T√™n s√°ch</th>
                    <th>Ng√†y m∆∞·ª£n</th>
                    <th>H·∫°n tr·∫£</th>
                    <th>Ng√†y tr·∫£</th>
                    <th>Tr·∫°ng th√°i</th>
                    <th>Ti·ªÅn ph·∫°t</th>
                    <th>Thao t√°c</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var record in Model)
                {
                    <tr>
                        <td>@record.BookCopy?.Book?.Title</td>
                        <td>@record.BorrowDate.ToString("dd/MM/yyyy")</td>
                        <td>@record.DueDate.ToString("dd/MM/yyyy")</td>
                        <td>@(record.ReturnDate?.ToString("dd/MM/yyyy") ?? "Ch∆∞a tr·∫£")</td>
                        <td>
                            @if (record.IsReturned)
                            {
                                <span class="badge bg-success">ƒê√£ tr·∫£</span>
                            }
                            else if (record.DueDate < DateTime.Now)
                            {
                                <span class="badge bg-danger">Qu√° h·∫°n</span>
                            }
                            else
                            {
                                <span class="badge bg-warning">ƒêang m∆∞·ª£n</span>
                            }
                        </td>
                        <td>
                            @if (record.FineAmount > 0)
                            {
                                <span class="text-danger">@record.FineAmount.ToString("N0") VNƒê</span>
                            }
                            else
                            {
                                <span>-</span>
                            }
                        </td>
                        <td>
                            <a href="@Url.Action("Details", new { id = record.BorrowID })" class="btn btn-sm btn-info">Chi ti·∫øt</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    @if (Model.Count == 0)
    {
        <div class="alert alert-info">
            <strong>B·∫°n ch∆∞a m∆∞·ª£n s√°ch n√†o!</strong>
        </div>
    }
</div>

